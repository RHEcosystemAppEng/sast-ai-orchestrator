# Development environment overrides for sast-ai.
# This file contains only development-specific settings that override values.yaml.

## Application configuration
app:
  image:
    pullPolicy: Always  # Always pull latest for dev
    tag: "latest"  # Development uses latest tag (updated by CI/CD)
  
  # Number of replicas - single replica for dev
  replicas: 1
  
  # Environment variables - development specific
  env:
    # Quarkus configuration - development settings
    QUARKUS_PROFILE: dev
    QUARKUS_LOG_LEVEL: INFO
    QUARKUS_HIBERNATE_ORM_LOG_SQL: false
    # SAST AI specific configuration - dev namespace
    SAST_AI_WORKFLOW_NAMESPACE: sast-ai-dev
    # OpenShift Console URL - development
    OPENSHIFT_CONSOLE_BASE_URL: "https://console-openshift-console.apps.appeng.clusters.se-apps.redhat.com"
    # OSH Integration - enabled for dev
    OSH_INTEGRATION_ENABLED: "true"

  # Resource limits and requests - lower for dev
  resources:
    limits:
      cpu: 1000m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 256Mi

## OpenShift Route configuration - dev specific
route:
  host: "sast-ai-orchestrator-sast-ai-dev.apps.appeng.clusters.se-apps.redhat.com"
  annotations:
    haproxy.router.openshift.io/timeout: 60s

## PostgreSQL configuration - dev sizing
postgres:
  storage:
    size: 4Gi
  resources:
    limits:
      cpu: 250m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi

## Horizontal Pod Autoscaler - disabled for dev
hpa:
  enabled: false

## Pod Disruption Budget - disabled for dev
pdb:
  enabled: false

## Monitoring - enabled for dev testing
monitoring:
  enabled: true
  serviceMonitor:
    enabled: true
    interval: 30s
    scrapeTimeout: 10s

## ConfigMap - dev-specific package list
configMap:
  data:
    application.properties: |
      # PostgreSQL setup
      quarkus.datasource.db-kind=postgresql
      quarkus.datasource.username=${DB_USERNAME}
      quarkus.datasource.password=${DB_PASSWORD}
      quarkus.datasource.jdbc.url=jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}

      # Hibernate ORM configuration
      quarkus.hibernate-orm.database.generation=${QUARKUS_HIBERNATE_ORM_DATABASE_GENERATION}
      quarkus.hibernate-orm.log.sql=${QUARKUS_HIBERNATE_ORM_LOG_SQL}

      # SAST AI configuration
      sast.ai.workflow.namespace=${SAST_AI_WORKFLOW_NAMESPACE}

      # Kubernetes client configuration
      quarkus.kubernetes-client.trust-certs=${QUARKUS_KUBERNETES_CLIENT_TRUST_CERTS}

      # OpenShift Console configuration
      openshift.console.base.url=${OPENSHIFT_CONSOLE_BASE_URL}

      # Logging configuration
      quarkus.log.category."org.jboss.logging".level=${QUARKUS_LOG_LEVEL}

      # Package filtering - comma-separated list of packages to monitor
      # Example: systemd,glibc
      osh.packages=${OSH_PACKAGES:}

      # GCS configuration - bucket name for uploading SARIF reports
      gcs.bucket.name=${GCS_BUCKET_NAME:}
    packages.txt: |
      adcli
      audit
      cpio
      glibc
      graphite2
      gzip
      libconfig
      libksba
      libpcap
      libpng
      libtalloc
      libuser
      lua
      mpdecimal
      nano
      ncurses
      popt
      rpcbind
      samba
      sqlite
      sysfsutils
      systemd
      texinfo
      tpm2-tools
      trace-cmd
      unzip
      util-linux
      device-mapper-multipath
      libkcapi
      pcsc-lite-ccid
      sed
      xz
      rhc
      parted
      lmdb
      numad
      lzop
      file
      libffi
      libev
      pcsc-lite
      pixman
      libldb
      cachefilesd
      libselinux
      libfido2
      libpwquality
      libgpg-error
      libidn2
      gcab