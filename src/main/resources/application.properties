# PostgreSQL setup
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=quarkus
quarkus.datasource.password=quarkus
quarkus.datasource.jdbc.url=jdbc:postgresql://localhost:5432/sast-ai

# Database schema management with Flyway
quarkus.hibernate-orm.database.generation=validate
quarkus.flyway.migrate-at-start=true
quarkus.flyway.repair-at-start=true

# Optional: show SQL queries
quarkus.hibernate-orm.log.sql=false

# Application version (filtered from Maven at build time)
quarkus.application.version=${project.version}

# sast.ai.workflow.namespace=${SAST_AI_WORKFLOW_NAMESPACE:jude-test}
# sast.ai.workflow.known.false.positive.base.repo=${KNOWN_FALSE_POSITIVE_BASE_REPO:https://please-provide-known-false-positives-repo-link}
sast.ai.workflow.namespace=${SAST_AI_WORKFLOW_NAMESPACE:sast-ai}
quarkus.log.category."org.jboss.logging".level=DEBUG
quarkus.kubernetes-client.trust-certs=false

# Google Service Account configuration
google.service.account.secret.path=${GOOGLE_SERVICE_ACCOUNT_SECRET_PATH:/etc/secrets/google-service-account-secret/service_account.json}

# PVC storage configuration
sast.ai.workspace.shared.size=20Gi
sast.ai.workspace.cache.size=10Gi

# Cleanup configuration
sast.ai.cleanup.completed.pipelineruns=false

# URL validation HTTP client timeout configuration
# NOTE: This service uses a separate HTTP client from other components in the application
url-validation.connection-timeout=5s
url-validation.request-timeout=30s

# Job batch sequential execution configuration
sast.ai.batch.job.polling.interval=5000
sast.ai.batch.job.timeout=3600000

# MLOps batch parallel execution configuration
mlops.batch.max.parallel.jobs=3

# DVC configuration
dvc.repo.url=https://github.com/RHEcosystemAppEng/sast-ai-dvc
# default value - might change in future
dvc.batch.yaml.path=testing-data-nvrs.yaml

# OSH (Open Scan Hub) Integration Configuration
# Master toggle for OSH integration
osh.integration.enabled=true

# OSH API connection settings
osh.api.base-url=${OSH_API_BASE_URL:https://cov01.lab.eng.brq2.redhat.com}

# Package filtering - comma-separated list of packages to monitor
# Example: systemd,kernel,glibc
osh.packages=${OSH_PACKAGES:systemd}

# Polling behavior configuration
osh.batch.size=${OSH_BATCH_SIZE:10}
osh.poll.interval=${OSH_POLL_INTERVAL:30s}
osh.scan.start-id=${OSH_SCAN_START_ID:1000000}
osh.scan.max-per-cycle=${OSH_SCAN_MAX_PER_CYCLE:50}

# JSON download configuration for OSH logs
osh.json.download-timeout=${OSH_JSON_DOWNLOAD_TIMEOUT:30s}
osh.json.primary-file=${OSH_JSON_PRIMARY_FILE:scan-results-all.json}

# Quarkus REST Client configuration for OSH API
quarkus.rest-client.osh-api.url=${osh.api.base-url}
quarkus.rest-client.osh-api.connect-timeout=10000
quarkus.rest-client.osh-api.read-timeout=30000

# OSH Retry Configuration
# Master toggle for retry mechanism
osh.retry.enabled=${OSH_RETRY_ENABLED:false}

# Retry behavior configuration
osh.retry.max-attempts=${OSH_RETRY_MAX_ATTEMPTS:3}
osh.retry.batch-size=${OSH_RETRY_BATCH_SIZE:5}
osh.retry.backoff-minutes=${OSH_RETRY_BACKOFF_MINUTES:20}
osh.retry.exponential-backoff=${OSH_RETRY_EXPONENTIAL_BACKOFF:true}

# Retention and cleanup configuration
osh.retry.retention-days=${OSH_RETRY_RETENTION_DAYS:7}
osh.retry.cleanup-interval=${OSH_RETRY_CLEANUP_INTERVAL:24h}

# CORS Configuration for frontend dev
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=
quarkus.http.cors.access-control-max-age=24H
quarkus.http.cors.access-control-allow-credentials=true
